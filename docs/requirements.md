# にゃんポーカー 要求仕様書

## 1. ゲーム概要

にゃんポーカーは、ブラウザで遊べるポーカーライクなカードゲームです。
プレイヤーは5枚の猫カードを使って役を揃えることを目指します。

## 2. ゲームの目的

5枚の猫カードで役を揃えることがゲームの目的です。
より強い役を揃えるほど高いポイントを獲得できます。

## 3. ゲームモード

### 3.1 ひとりで遊ぶモード

- 5ゲームプレイし、合計ポイントを競う
- 各ゲームで役を揃えるとポイントを獲得

### 3.2 対戦モード（vsディーラー）

- ディーラーと5ゲーム対戦
- 各ゲームでより高いポイントの役を揃えた方が勝利
- 勝者: 自分の役のポイントを獲得
- 敗者: 勝者が得たポイント分がマイナスされる
- 5ゲーム終了後、合計ポイントが多い方が最終勝者

## 4. カードの属性

各カードには以下の2つの属性があります。

### 4.1 毛色（12種類）

| コード | 毛色 | カード枚数 |
|--------|------|------------|
| 0 | 茶トラ | 27枚 |
| 1 | 三毛 | 12枚 |
| 2 | 白猫 | 14枚 |
| 3 | 黒猫 | 15枚 |
| 4 | 茶白 | 30枚 |
| 5 | キジ白 | 23枚 |
| 6 | キジトラ | 27枚 |
| 7 | 白黒 | 19枚 |
| 8 | サバトラ | 17枚 |
| 9 | グレー | 24枚 |
| 10 | トビ | 13枚 |
| 11 | サビ | 8枚 |

### 4.2 毛の長さ（2種類）

| コード | 毛の長さ | カード枚数 |
|--------|----------|------------|
| 0 | 長毛 | 48枚 |
| 1 | 短毛 | 181枚 |

### 4.3 カードデータファイル

カードデータは `images/map.yml` に定義されています。

```yaml
# フォーマット
color:       # 毛色コードと名称のマッピング
fur:         # 毛の長さコードと名称のマッピング
images:      # 各カード画像の属性
  image_XXX.jpg: [毛色コード, 毛の長さコード]
```

- 総カード枚数: 229枚
- 画像ファイル: `images/image_000.jpg` 〜 `images/image_228.jpg`

## 5. 役一覧

ポイントは0〜300の範囲で、出現確率に基づいて計算されています。
すべての役が異なるポイントを持ち、同ポイントによる引き分けは発生しません。
確率が低い（難しい）役ほど高いポイントが設定されています。
全249種類の役があります。

### 5.1 フラッシュ系（5枚同色）

5枚すべて同じ毛色で揃える役です。

| 役名 | 確率 | ポイント |
|------|------|----------|
| サビフラッシュ | 0.000001% | 300 |
| 三毛フラッシュ | 0.000016% | 299 |
| トビフラッシュ | 0.000026% | 298 |
| 白猫フラッシュ | 0.000040% | 296 |
| 黒猫フラッシュ | 0.000060% | 295 |
| サバトラフラッシュ | 0.000123% | 288 |
| 白黒フラッシュ | 0.000232% | 282 |
| キジ白フラッシュ | 0.000670% | 258 |
| グレーフラッシュ | 0.000846% | 250 |
| 茶トラフラッシュ | 0.001607% | 226 |
| キジトラフラッシュ | 0.001607% | 225 |
| 茶白フラッシュ | 0.002837% | 198 |

※ 茶トラフラッシュとキジトラフラッシュは確率が同一ですが、毛色コード順（茶トラ=0 > キジトラ=6）で優劣を決定しています。

### 5.2 ファー系（毛の長さ）

5枚すべて同じ毛の長さで揃える役です。

| 役名 | 確率 | ポイント |
|------|------|----------|
| ロングファー | 0.034094% | 100 |
| ショートファー | 30.486687% | 1 |

### 5.3 フォーカラー（4枚同色）

4枚が同じ毛色で揃う役です。

| 役名 | 確率 | ポイント |
|------|------|----------|
| サビフォーカラー | 0.000308% | 277 |
| 三毛フォーカラー | 0.002139% | 213 |
| トビフォーカラー | 0.003075% | 197 |
| 白猫フォーカラー | 0.004285% | 180 |
| 黒猫フォーカラー | 0.005816% | 166 |
| サバトラフォーカラー | 0.010046% | 143 |
| 白黒フォーカラー | 0.016207% | 123 |
| キジ白フォーカラー | 0.036320% | 98 |
| グレーフォーカラー | 0.043373% | 92 |
| 茶トラフォーカラー | 0.070587% | 80 |
| キジトラフォーカラー | 0.070587% | 79 |
| 茶白フォーカラー | 0.108587% | 63 |

### 5.4 フルハウス（3枚+2枚同色）

3枚が同じ毛色で、残り2枚が別の同じ毛色の役です。

| 役名 | 確率 | ポイント |
|------|------|----------|
| サビ×三毛フルハウス | 0.000074% | 294 |
| サビ×トビフルハウス | 0.000087% | 293 |
| サビ×白猫フルハウス | 0.000101% | 292 |
| サビ×黒猫フルハウス | 0.000117% | 290 |
| 三毛×サビフルハウス | 0.000123% | 289 |
| サビ×サバトラフルハウス | 0.000152% | 287 |
| トビ×サビフルハウス | 0.000159% | 285 |
| サビ×白黒フルハウス | 0.000191% | 284 |
| 白猫×サビフルハウス | 0.000203% | 283 |
| 黒猫×サビフルハウス | 0.000254% | 281 |
| サビ×キジ白フルハウス | 0.000282% | 279 |
| サビ×グレーフルハウス | 0.000308% | 278 |
| 三毛×トビフルハウス | 0.000342% | 276 |
| トビ×三毛フルハウス | 0.000376% | 275 |
| サバトラ×サビフルハウス | 0.000379% | 273 |
| サビ×茶トラフルハウス | 0.000391% | 272 |
| サビ×キジトラフルハウス | 0.000391% | 271 |
| 三毛×白猫フルハウス | 0.000399% | 270 |
| 三毛×黒猫フルハウス | 0.000460% | 269 |
| 白猫×三毛フルハウス | 0.000478% | 267 |
| サビ×茶白フルハウス | 0.000485% | 266 |
| トビ×白猫フルハウス | 0.000518% | 265 |
| 白黒×サビフルハウス | 0.000540% | 264 |
| 白猫×トビフルハウス | 0.000565% | 262 |
| 三毛×サバトラフルハウス | 0.000596% | 261 |
| 黒猫×三毛フルハウス | 0.000598% | 260 |
| トビ×黒猫フルハウス | 0.000598% | 259 |
| 黒猫×トビフルハウス | 0.000707% | 256 |
| 三毛×白黒フルハウス | 0.000749% | 255 |
| 白猫×黒猫フルハウス | 0.000761% | 254 |
| トビ×サバトラフルハウス | 0.000774% | 253 |
| 黒猫×白猫フルハウス | 0.000824% | 252 |
| サバトラ×三毛フルハウス | 0.000894% | 249 |
| トビ×白黒フルハウス | 0.000974% | 248 |
| 白猫×サバトラフルハウス | 0.000986% | 247 |
| キジ白×サビフルハウス | 0.000987% | 246 |
| サバトラ×トビフルハウス | 0.001056% | 244 |
| 三毛×キジ白フルハウス | 0.001108% | 243 |
| グレー×サビフルハウス | 0.001128% | 242 |
| 三毛×グレーフルハウス | 0.001209% | 241 |
| 黒猫×サバトラフルハウス | 0.001232% | 240 |
| サバトラ×白猫フルハウス | 0.001232% | 238 |
| 白猫×白黒フルハウス | 0.001239% | 237 |
| 白黒×三毛フルハウス | 0.001273% | 236 |
| サバトラ×黒猫フルハウス | 0.001422% | 235 |
| トビ×キジ白フルハウス | 0.001441% | 233 |
| 白黒×トビフルハウス | 0.001505% | 232 |
| 三毛×茶トラフルハウス | 0.001538% | 231 |
| 三毛×キジトラフルハウス | 0.001538% | 230 |
| 黒猫×白黒フルハウス | 0.001549% | 229 |
| トビ×グレーフルハウス | 0.001572% | 227 |
| 茶トラ×サビフルハウス | 0.001631% | 224 |
| キジトラ×サビフルハウス | 0.001631% | 223 |
| 白黒×白猫フルハウス | 0.001756% | 221 |
| 白猫×キジ白フルハウス | 0.001834% | 220 |
| 三毛×茶白フルハウス | 0.001905% | 219 |
| トビ×茶トラフルハウス | 0.001999% | 218 |
| トビ×キジトラフルハウス | 0.001999% | 217 |
| 白猫×グレーフルハウス | 0.002000% | 215 |
| 白黒×黒猫フルハウス | 0.002026% | 214 |
| 茶白×サビフルハウス | 0.002263% | 212 |
| 黒猫×キジ白フルハウス | 0.002292% | 210 |
| サバトラ×白黒フルハウス | 0.002315% | 209 |
| キジ白×三毛フルハウス | 0.002327% | 208 |
| トビ×茶白フルハウス | 0.002477% | 207 |
| 黒猫×グレーフルハウス | 0.002500% | 206 |
| 白猫×茶トラフルハウス | 0.002544% | 204 |
| 白猫×キジトラフルハウス | 0.002544% | 203 |
| 白黒×サバトラフルハウス | 0.002624% | 202 |
| グレー×三毛フルハウス | 0.002660% | 201 |
| キジ白×トビフルハウス | 0.002750% | 200 |
| グレー×トビフルハウス | 0.003143% | 196 |
| 白猫×茶白フルハウス | 0.003153% | 195 |
| 黒猫×茶トラフルハウス | 0.003180% | 194 |
| 黒猫×キジトラフルハウス | 0.003180% | 192 |
| キジ白×白猫フルハウス | 0.003209% | 191 |
| サバトラ×キジ白フルハウス | 0.003425% | 190 |
| グレー×白猫フルハウス | 0.003667% | 189 |
| キジ白×黒猫フルハウス | 0.003703% | 188 |
| サバトラ×グレーフルハウス | 0.003737% | 186 |
| 茶トラ×三毛フルハウス | 0.003844% | 185 |
| キジトラ×三毛フルハウス | 0.003844% | 184 |
| 黒猫×茶白フルハウス | 0.003941% | 183 |
| グレー×黒猫フルハウス | 0.004231% | 181 |
| 茶トラ×トビフルハウス | 0.004543% | 179 |
| キジトラ×トビフルハウス | 0.004543% | 178 |
| サバトラ×茶トラフルハウス | 0.004752% | 177 |
| サバトラ×キジトラフルハウス | 0.004752% | 175 |
| キジ白×サバトラフルハウス | 0.004796% | 174 |
| 白黒×キジ白フルハウス | 0.004881% | 173 |
| 茶トラ×白猫フルハウス | 0.005300% | 172 |
| キジトラ×白猫フルハウス | 0.005300% | 171 |
| 白黒×グレーフルハウス | 0.005325% | 169 |
| 茶白×三毛フルハウス | 0.005335% | 168 |
| グレー×サバトラフルハウス | 0.005481% | 167 |
| サバトラ×茶白フルハウス | 0.005890% | 165 |
| キジ白×白黒フルハウス | 0.006030% | 163 |
| 茶トラ×黒猫フルハウス | 0.006115% | 162 |
| キジトラ×黒猫フルハウス | 0.006115% | 161 |
| 茶白×トビフルハウス | 0.006305% | 160 |
| 白黒×茶トラフルハウス | 0.006772% | 158 |
| 白黒×キジトラフルハウス | 0.006772% | 157 |
| グレー×白黒フルハウス | 0.006891% | 156 |
| 茶白×白猫フルハウス | 0.007356% | 155 |
| 茶トラ×サバトラフルハウス | 0.007921% | 152 |
| キジトラ×サバトラフルハウス | 0.007921% | 151 |
| 白黒×茶白フルハウス | 0.008393% | 150 |
| 茶白×黒猫フルハウス | 0.008488% | 149 |
| キジ白×グレーフルハウス | 0.009732% | 146 |
| 茶トラ×白黒フルハウス | 0.009959% | 145 |
| キジトラ×白黒フルハウス | 0.009959% | 144 |
| グレー×キジ白フルハウス | 0.010196% | 142 |
| 茶白×サバトラフルハウス | 0.010994% | 139 |
| キジ白×茶トラフルハウス | 0.012377% | 137 |
| キジ白×キジトラフルハウス | 0.012377% | 135 |
| 茶白×白黒フルハウス | 0.013823% | 134 |
| グレー×茶トラフルハウス | 0.014145% | 133 |
| グレー×キジトラフルハウス | 0.014145% | 132 |
| 茶トラ×キジ白フルハウス | 0.014735% | 131 |
| キジトラ×キジ白フルハウス | 0.014735% | 129 |
| キジ白×茶白フルハウス | 0.015339% | 128 |
| 茶トラ×グレーフルハウス | 0.016074% | 126 |
| キジトラ×グレーフルハウス | 0.016074% | 125 |
| グレー×茶白フルハウス | 0.017530% | 122 |
| 茶トラ×キジトラフルハウス | 0.020442% | 120 |
| キジトラ×茶トラフルハウス | 0.020442% | 119 |
| 茶白×キジ白フルハウス | 0.020452% | 117 |
| 茶白×グレーフルハウス | 0.022312% | 115 |
| 茶トラ×茶白フルハウス | 0.025334% | 111 |
| キジトラ×茶白フルハウス | 0.025334% | 110 |
| 茶白×茶トラフルハウス | 0.028374% | 106 |
| 茶白×キジトラフルハウス | 0.028374% | 105 |

### 5.5 スリーカラー（3枚同色）

3枚が同じ毛色で、残り2枚が異なる2色の役です。

| 役名 | 確率 | ポイント |
|------|------|----------|
| サビスリーカラー | 0.024527% | 112 |
| 三毛スリーカラー | 0.092694% | 70 |
| トビスリーカラー | 0.119341% | 60 |
| 白猫スリーカラー | 0.150424% | 50 |
| 黒猫スリーカラー | 0.186219% | 42 |
| サバトラスリーカラー | 0.272970% | 35 |
| 白黒スリーカラー | 0.381535% | 29 |
| キジ白スリーカラー | 0.670939% | 22 |
| グレースリーカラー | 0.759453% | 19 |
| 茶トラスリーカラー | 1.066429% | 18 |
| キジトラスリーカラー | 1.066429% | 17 |
| 茶白スリーカラー | 1.438527% | 16 |

### 5.6 ツーペア（2色のペア）

2枚ずつ同じ毛色のペアが2組ある役です。

| 役名 | 確率 | ポイント |
|------|------|----------|
| 三毛×サビツーペア | 0.007690% | 154 |
| トビ×サビツーペア | 0.009045% | 148 |
| 白猫×サビツーペア | 0.010502% | 140 |
| 黒猫×サビツーペア | 0.012059% | 138 |
| サバトラ×サビツーペア | 0.015468% | 127 |
| 白黒×サビツーペア | 0.019257% | 121 |
| 三毛×トビツーペア | 0.020910% | 116 |
| 三毛×白猫ツーペア | 0.024276% | 114 |
| 三毛×黒猫ツーペア | 0.027873% | 109 |
| キジ白×サビツーペア | 0.027928% | 108 |
| 白猫×トビツーペア | 0.028548% | 104 |
| グレー×サビツーペア | 0.030313% | 103 |
| 黒猫×トビツーペア | 0.032777% | 102 |
| 三毛×サバトラツーペア | 0.035744% | 99 |
| 茶トラ×サビツーペア | 0.037963% | 97 |
| キジトラ×サビツーペア | 0.037963% | 96 |
| 白猫×黒猫ツーペア | 0.038050% | 94 |
| サバトラ×トビツーペア | 0.042032% | 93 |
| 三毛×白黒ツーペア | 0.044494% | 91 |
| 茶白×サビツーペア | 0.046321% | 90 |
| 白猫×サバトラツーペア | 0.048791% | 88 |
| 白黒×トビツーペア | 0.052318% | 87 |
| 黒猫×サバトラツーペア | 0.056013% | 86 |
| 白猫×白黒ツーペア | 0.060728% | 85 |
| 三毛×キジ白ツーペア | 0.064500% | 83 |
| 黒猫×白黒ツーペア | 0.069713% | 82 |
| 三毛×グレーツーペア | 0.070001% | 81 |
| キジ白×トビツーペア | 0.075834% | 77 |
| グレー×トビツーペア | 0.082300% | 76 |
| 茶トラ×三毛ツーペア | 0.087639% | 75 |
| 三毛×キジトラツーペア | 0.087639% | 74 |
| 白猫×キジ白ツーペア | 0.088015% | 73 |
| 白黒×サバトラツーペア | 0.089369% | 71 |
| 白猫×グレーツーペア | 0.095516% | 69 |
| 黒猫×キジ白ツーペア | 0.101027% | 68 |
| 茶トラ×トビツーペア | 0.103029% | 67 |
| キジトラ×トビツーペア | 0.103029% | 65 |
| 三毛×茶白ツーペア | 0.106898% | 64 |
| 黒猫×グレーツーペア | 0.109634% | 62 |
| 茶トラ×白猫ツーペア | 0.119564% | 59 |
| 白猫×キジトラツーペア | 0.119564% | 58 |
| 茶白×トビツーペア | 0.125658% | 57 |
| キジ白×サバトラツーペア | 0.129484% | 56 |
| 茶トラ×黒猫ツーペア | 0.137225% | 54 |
| 黒猫×キジトラツーペア | 0.137225% | 53 |
| サバトラ×グレーツーペア | 0.140508% | 52 |
| 白猫×茶白ツーペア | 0.145813% | 51 |
| キジ白×白黒ツーペア | 0.161084% | 48 |
| 黒猫×茶白ツーペア | 0.167336% | 47 |
| 白黒×グレーツーペア | 0.174788% | 46 |
| 茶トラ×サバトラツーペア | 0.175838% | 45 |
| キジトラ×サバトラツーペア | 0.175838% | 44 |
| 茶白×サバトラツーペア | 0.214385% | 41 |
| 茶トラ×白黒ツーペア | 0.218700% | 40 |
| キジトラ×白黒ツーペア | 0.218700% | 39 |
| キジ白×グレーツーペア | 0.253043% | 38 |
| 茶白×白黒ツーペア | 0.266595% | 36 |
| 茶トラ×キジ白ツーペア | 0.316501% | 34 |
| キジ白×キジトラツーペア | 0.316501% | 33 |
| 茶トラ×グレーツーペア | 0.343345% | 31 |
| キジトラ×グレーツーペア | 0.343345% | 30 |
| 茶白×キジ白ツーペア | 0.385671% | 28 |
| 茶白×グレーツーペア | 0.418341% | 27 |
| 茶トラ×キジトラツーペア | 0.429286% | 25 |
| 茶トラ×茶白ツーペア | 0.522900% | 24 |
| 茶白×キジトラツーペア | 0.522900% | 23 |

### 5.7 ワンペア（2枚同色）

2枚が同じ毛色で、残り3枚が全て異なる色の役です。

| 役名 | 確率 | ポイント |
|------|------|----------|
| サビワンペア | 0.725565% | 21 |
| 三毛ワンペア | 1.607817% | 15 |
| トビワンペア | 1.871402% | 13 |
| 白猫ワンペア | 2.150454% | 12 |
| 黒猫ワンペア | 2.444174% | 11 |
| サバトラワンペア | 3.072603% | 10 |
| 白黒ワンペア | 3.751029% | 8 |
| キジ白ワンペア | 5.237967% | 7 |
| グレーワンペア | 5.633588% | 6 |
| 茶トラワンペア | 6.870108% | 5 |
| キジトラワンペア | 6.870108% | 4 |
| 茶白ワンペア | 8.172522% | 2 |

### 5.8 ノーペア

どの役にも該当しない場合の役です。

| 役名 | 確率 | ポイント |
|------|------|----------|
| ノーペア | 35.525998% | 0 |

## 6. 役の判定ルール

複数の役が成立する場合、**ポイントが最も高い役**が採用されます。

例：
- 短毛5枚で白猫2枚を含む手札の場合
  - ショートファー（1pt）と白猫ワンペア（12pt）が成立
  - → ポイントが高い**白猫ワンペア（12pt）**が採用される

役の強さはポイントで一意に決まるため、常に最も有利な役が自動的に選択されます。

## 7. ゲームフロー

### 7.1 ひとりで遊ぶモード

```
[ゲーム開始]
    ↓
[ラウンド1〜5をループ]
    ↓
┌─────────────────────────────────┐
│ 1. カード配布                    │
│    - デッキから5枚をランダムに配布 │
│    - 配布されたカードを表示       │
├─────────────────────────────────┤
│ 2. カード交換（1回のみ）          │
│    - 交換したいカードを選択（0〜5枚）│
│    - 5枚すべての交換も可能        │
│    - 選択したカードを捨て、新しいカードを引く │
│    - 交換しない選択も可能         │
├─────────────────────────────────┤
│ 3. 役判定                        │
│    - 手札の役を判定              │
│    - 獲得ポイントを表示          │
│    - 合計ポイントに加算          │
└─────────────────────────────────┘
    ↓
[5ラウンド終了後]
    ↓
[最終スコア表示]
```

### 7.2 対戦モード（vsディーラー）

```
[ゲーム開始]
    ↓
[ラウンド1〜5をループ]
    ↓
┌─────────────────────────────────┐
│ 1. カード配布                    │
│    - プレイヤーとディーラーにそれぞれ5枚配布 │
│    - プレイヤーの手札のみ表示     │
│    - ディーラーの手札は非公開     │
├─────────────────────────────────┤
│ 2. プレイヤーのカード交換（1回のみ）│
│    - 交換したいカードを選択（0〜5枚）│
│    - 選択したカードを捨て、新しいカードを引く │
├─────────────────────────────────┤
│ 3. ディーラーのカード交換         │
│    - ディーラーは自動で最適な交換を行う │
│    - 交換内容は非公開            │
├─────────────────────────────────┤
│ 4. 役判定・勝敗決定              │
│    - 両者の手札を公開            │
│    - 役を判定し、ポイントを比較   │
│    - 勝者はポイント獲得、敗者は同額マイナス │
└─────────────────────────────────┘
    ↓
[5ラウンド終了後]
    ↓
[最終結果表示（勝敗・合計ポイント）]
```

### 7.3 デッキ管理

- 各ラウンドの開始時にデッキをシャッフル
- 1ラウンド内では同じカードは2度配布されない
- ラウンド終了後、すべてのカードがデッキに戻る

### 7.4 ディーラーのAIロジック

ディーラーは以下の優先順位で交換を判断（上から順に評価し、最初に該当した戦略を採用）：

1. フラッシュが狙える場合（同色4枚以上）→ 他の色を交換
2. ロングファーが狙える場合（長毛4枚以上）→ 短毛を交換
3. フォーカラー/スリーカラーがある場合 → 他の色を交換して狙う
4. ペアがある場合 → ペア以外を交換
5. 役なしの場合 → 最も枚数の多い色を残して他を交換

※ 複数の条件が同時に成立する場合でも、上記の優先順位に従い1つの戦略のみを採用する

## 8. 勝敗判定

### 8.1 役の強さ比較

ポイントで比較し、高い方が勝利。すべての役が異なるポイントを持つため、必ず勝敗が決まります。

### 8.2 対戦モードの勝敗

- 勝利: 相手より高いポイントの役を揃えた → 自分の役のポイントを獲得
- 敗北: 相手より低いポイントの役を揃えた → 勝者が得たポイント分がマイナス
- 引き分け: 同じ役（同じポイント）の場合 → 両者ともポイント増減なし

## 9. UI/UX仕様

### 9.1 デザインテイスト

- ポップだがカラフルすぎない、大人が遊べる落ち着いた雰囲気
- 明るすぎない色使い、洗練されたデザイン
- 猫の画像を活かした温かみのあるビジュアル

### 9.2 対応デバイス

- PC優先のレスポンシブデザイン
- 最小対応幅: 375px（スマートフォン）
- 推奨幅: 1024px以上（PC）

### 9.3 対応ブラウザ

- Chrome（最新2バージョン）
- Firefox（最新2バージョン）
- Safari（最新2バージョン）
- Edge（最新2バージョン）

### 9.4 アクセシビリティ

- キーボード操作: 非対応（マウス/タッチ操作のみ）
- スクリーンリーダー: 非対応

### 9.5 画面構成

1. **タイトル画面**
   - ゲームタイトル「にゃんポーカー」
   - モード選択ボタン（ひとりで遊ぶ / 対戦モード）
   - ルール説明ボタン
   - 設定ボタン

2. **ゲーム画面**
   - 手札エリア（5枚のカード表示）
   - カード選択UI（クリック/タップで選択）
   - 交換ボタン
   - 現在のラウンド表示
   - スコア表示
   - 役名表示エリア

3. **対戦モード追加要素**
   - ディーラーの手札エリア（結果表示時に公開）
   - 勝敗表示

4. **結果画面**
   - 最終スコア表示
   - 各ラウンドの獲得ポイント一覧
   - もう一度遊ぶボタン
   - タイトルに戻るボタン

5. **ルール説明画面**
   - 遊び方の説明
   - 役一覧とポイント表
   - 閉じるボタン

6. **設定画面**
   - 効果音ON/OFF
   - 音量調整
   - 戦績リセットボタン

### 9.6 カード表示

- カードサイズ: PC 120x160px / スマホ 80x107px（3:4比率）
- 選択状態: カードが上に少し浮く + 枠線ハイライト
- ホバー状態: 軽いスケールアップ

## 10. アニメーション仕様

### 10.1 カード配布アニメーション

- デッキから各カード位置へスライドイン
- 順番に配布（0.1秒間隔）
- イージング: ease-out

### 10.2 カード交換アニメーション

- 選択カードがデッキ方向へフェードアウト
- 新しいカードがデッキからスライドイン
- 0.3秒程度のトランジション

### 10.3 役成立アニメーション

- カードが揺れる/光るエフェクト
- 役名がポップアップ表示
- ポイント加算のカウントアップ演出

### 10.4 勝敗アニメーション（対戦モード）

- 勝利: 紙吹雪エフェクト、カードが輝く
- 敗北: カードが暗くなる演出

## 11. サウンド仕様

### 11.1 効果音

| タイミング | ファイル | 説明 |
|------------|----------|------|
| カード配布 | deal.mp3 | カードを配る音 |
| カード交換 | flip.mp3 | カードをめくる音 |
| 勝利 | win.mp3 | 勝利時のファンファーレ |
| 敗北 | lose.mp3 | 敗北時の残念音 |

効果音ファイルは `sounds/` ディレクトリに配置されています。

### 11.2 BGM

- BGMなし（効果音のみ）

### 11.3 設定

- デフォルト: 効果音ON
- 音量調整可能（0〜100%）
- ミュートボタン

## 12. データ保存仕様

### 12.1 ローカルストレージ保存項目

- ハイスコア（ひとりモード）
- 対戦戦績（勝敗数）
- 設定（音量、効果音ON/OFF）

### 12.2 データ形式

```json
{
  "highScore": 50,
  "battleRecord": {
    "wins": 10,
    "losses": 5
  },
  "settings": {
    "soundEnabled": true,
    "volume": 80
  }
}
```

## 13. 技術スタック

### 13.1 フロントエンド

- React 18+
- TypeScript
- Vite（ビルドツール）
- CSS Modules または Tailwind CSS

### 13.2 アニメーション

- Framer Motion（Reactアニメーションライブラリ）

### 13.3 サウンド

- Howler.js または Web Audio API

### 13.4 ホスティング

- 開発環境: ローカル（Vite dev server）
- 本番環境: AWS S3 + CloudFront

### 13.5 ディレクトリ構成（予定）

```
nyan-poker/
├── docs/                # ドキュメント
├── images/              # 猫画像（カード用）
├── sounds/              # 効果音ファイル
├── src/
│   ├── components/      # Reactコンポーネント
│   ├── hooks/           # カスタムフック
│   ├── utils/           # ユーティリティ関数
│   ├── types/           # TypeScript型定義
│   ├── styles/          # スタイル
│   └── App.tsx          # メインコンポーネント
├── public/              # 公開ファイル
├── package.json
├── tsconfig.json
└── vite.config.ts
```
